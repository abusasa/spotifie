!function(){const e=Date.now().toString(),t=new URL(document.currentScript?.src).origin,o="sendBeacon"in navigator;function n(n,r){o&&navigator.sendBeacon(t+"/api/event/tick",JSON.stringify({identity:e,event:n,timestamp:(new Date).toISOString(),properties:{event_time:Date.now(),origin:window.location.hostname,ua:navigator.userAgent,...r}}))}(async function(){n("Toolbar bootstrap init",{event_name:"FEEDBACK_BOOTSTRAP_INIT"});const e=document.currentScript?.src;try{var t=sessionStorage.getItem("vercel-live-script-origin-override");if(t&&e&&/^https?:\/\/(?:localhost(:\d+)?|vercel-live-git-[\w-]+\.vercel\.sh)$/.test(t)){var o=e.replace(new URL(e).origin,t);if(o!==e){const c=document.createElement("script");return c.src=o,void document.head.appendChild(c)}}}catch{}if(window!==window.parent){let s=window;for(;s!==s.top;)if((s=s.parent).origin===window.origin){if(s.document.querySelector("vercel-live-feedback"))return;if(e&&s.document.querySelector(`script[src="${e}"]`))return}}let r;try{const d=new URLSearchParams(window.location.search);if(r=d.get("vercelToolbarCode")){d.delete("vercelToolbarCode");const l=new URL(window.location.href);l.search=d.toString().replaceAll("+","%20"),window.history.replaceState(window.history.state,"",l)}}catch{}const i=document.currentScript;if(document.body.attachShadow&&i){t=location.hostname;const u=document.currentScript;if("vercel.com"!==t&&"beta.nextjs.org"!==t&&"localhost"!==t&&"10.0.2.2"!==t&&!(/(?:^|;\s)__vercel_toolbar=1(?:;|$)/.test(document.cookie)||u&&"true"===u.getAttribute("data-explicit-opt-in"))){const v=await fetch("/",{method:"OPTIONS"});if(!/noindex/i.test(v.headers.get("x-robots-tag")))return}let m;const p=async e=>{try{if(!e)return void n("Toolbar proxy missing event",{event_name:"TOOLBAR_PROXY_MISSING_EVENT"});if(e.origin!==window.origin)return;var t=e.source;const c=m?.contentWindow?.fetch?.bind(window)||window.fetch;if("get-draft-status"===e.data){const e=await c(location.href,{method:"HEAD",headers:{"x-vercel-draft-status":"1"}});m&&m.contentWindow===t&&m.contentWindow.postMessage({type:"draft-status-result",status:e.headers.get("x-vercel-token-status")},window.origin)}if("fetch-proxy"===e.data.type){var{url:o,init:r,requestId:i}=e.data;const n=await c(o,r);var a=await n.arrayBuffer();m&&m.contentWindow===t&&m.contentWindow.postMessage({type:"fetch-proxy-response",requestId:i,body:a,status:n.status,statusText:n.statusText,headers:Array.from(n.headers.entries())},window.origin,[a])}}catch(e){n("Toolbar proxy error",{event_name:"TOOLBAR_PROXY_ERROR",error:e.message,stack:e.stack})}},w=new MutationObserver((e=>{e.some((e=>"childList"===e.type&&[...e.removedNodes].some((e=>"VERCEL-LIVE-FEEDBACK"===e.tagName))))&&("requestIdleCallback"in window?window.requestIdleCallback:window.setTimeout)((()=>{a()}))}));function a(){try{if(sessionStorage.getItem("vercel-live-feedback-optout"))return}catch(e){}if(!document.querySelector("vercel-live-feedback")){const e=new URL(i.src).origin,t=document.createElement("vercel-live-feedback"),o=(t.style.cssText="position:absolute;top:0;left:0;z-index:2147483647",document.body.appendChild(t),t.attachShadow({mode:"closed"})),a=document.createElement("iframe"),c=((m=a).width=0,a.height=0,a.tabIndex=-1,a.hidden=!0,a.title="empty",a.style.cssText="display:none",a.style.contain="content",a.srcdoc=`<!doctype html><script src="${e}/_next-live/feedback/instrument.b47e3ed1064c6737300a.js"><\/script>`,()=>{t.remove();const e=document.createElement("script");e.src=i.src,i.remove(),document.head.appendChild(e)}),s=()=>{w.disconnect(),t.remove(),i.remove(),removeEventListener("message",p)},d=(...e)=>fetch(...e),l=e=>import(e);a.onload=function(){a.contentWindow.initLiveFeedback({root:o,liveOrigin:e,reloadFeedback:c,topFetch:d,topImport:l,unmount:s,scriptAttributes:u?Object.fromEntries(u.getAttributeNames().map((e=>[e,u.getAttribute(e)]))):{},toolbarCode:r}),n("Toolbar bootstrap complete",{event_name:"FEEDBACK_BOOTSTRAP_COMPLETE"})},o.append(a)}}w.observe(document.body,{childList:!0}),a(),addEventListener("message",p)}else n("Toolbar bootstrap exit legacy",{event_name:"FEEDBACK_BOOTSTRAP_EXIT_LEGACY"})})().catch((e=>{n("Toolbar bootstrap error",{event_name:"FEEDBACK_BOOTSTRAP_ERROR",error:e.message,stack:e.stack})}))}();